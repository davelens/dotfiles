# Second level indentations requires 4 spaces or they will fail.
- defaults:
    link:
      create: true
      relink: true

- clean: ['~']

- create:
    # Not *exactly* sure if the fonts/fontconfig folders are necessary, but
    # I'm banking on software picking up folders already present in XDG.
    - $XDG_CONFIG_HOME/fontconfig
    - $XDG_DATA_HOME/fonts
    - $XDG_DATA_HOME/irb
    - $XDG_STATE_HOME/bash # HISTFILE is set to live in this target folder.
    - $GNUPGHOME

# NOTE: "XDG dir support instead of $HOME" is currently a patch waiting to be
# merged into bash, so keep an eye on this:
#
#   https://savannah.gnu.org/support/?108134
#
- link:
    ~/.bash_profile:
      path: config/bash_profile
      backup: true
    ~/.bashrc:
      path: config/bashrc
      backup: true
    $BASHRC: config/bashrc
    $BASH_PROFILE: config/bash_profile
    $XDG_CONFIG_HOME/:
      glob: true
      path: config/*
      exclude: [
        config/arch,
        config/macos,
        config/wsl,
        config/bash_profile,
        config/bashrc
      ]

- link:
    $XDG_CONFIG_HOME/:
      if: '[ "$(bin/autoload/os)" = "macos" ]'
      glob: true
      path: config/macos/*
      exclude: [config/macos/defaults.sh]

- link:
    $XDG_CONFIG_HOME/:
      if: '[ "$(bin/autoload/os)" = "arch" ]'
      glob: true
      path: config/arch/*

- link:
    $XDG_CONFIG_HOME/:
      if: '[ "$(bin/autoload/os)" = "wsl" ]'
      glob: true
      path: config/wsl/*

- link:
    $XDG_BIN_HOME/utility: bin/utility
    $XDG_BIN_HOME/:
      glob: true
      path: bin/autoload/*

- shell:
  - [git submodule update --init --recursive, Installing submodules]
