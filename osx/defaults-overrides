#!/bin/bash

####################################################################
# A big number of these should be credited to Matthias Bynens.
# This is my own take on the defaults, attuned to my preferences.
####################################################################

# Disable 3D Dock
defaults write com.apple.dock no-glass -bool true

# Disable Dock magnification
defaults write com.apple.dock magnification -bool false

# Move the Dock to the bottom right
defaults write com.apple.dock pinning -string end

# Use the scale animation instead of genie for minimizing windows
defaults write com.apple.dock mineffect -string scale

# Disable Dashboard
defaults write com.apple.dashboard mcx-disabled -bool true

# Turn off fade + popup animation effects
defaults write -g NSAutomaticWindowAnimationsEnabled -bool false

# Turn off Mission Control zoom effects
defaults write com.apple.dock expose-animation-duration -int 0

# Stop save and print dialogs from sliding out and down from the title bar
defaults write -g NSWindowResizeTime -float 0.01

# Make Launchpad show/hide instantly
defaults write com.apple.dock springboard-show-duration -int 0
defaults write com.apple.dock springboard-hide-duration -int 0

# Autohide the dock
defaults write com.apple.dock autohide-time-modifier -float 0.5

# Enables you to select and copy text in Quick Look windows
defaults write com.apple.finder QLEnableTextSelection -bool true

# Make the click-sensitive surface of the resizing-button in the bottom right of windows bigger
defaults write -g AppleEdgeResizeExteriorSize 10

# Enable scroll gesture on Mission Control + Stacks icons in the Dock
defaults write com.apple.dock scroll-to-open -bool true

# Disable inertia scrolling
defaults write -g AppleMomentumScrollSupported -bool false

# Fix ugly fonts on external displays
defaults -currentHost write -g AppleFontSmoothing -int 2

# Display full path to active directory in Finder
defaults write com.apple.finder PathBarRootAtHome -bool true

# Disable background blur in Launchpad
defaults write com.apple.dock springboard-blur-radius -int 150

# Enable mouse-over trigger for Dock stacks
defaults write com.apple.dock mouse-over-hilite-stack -bool true

# Enable spring loading for all Dock items
defaults write enable-spring-load-actions-on-all-items -bool true

# Set a blazingly fast keyboard repeat rate
defaults write -g KeyRepeat -int 2
defaults write -g InitialKeyRepeat -int 25

# Disable auto-correct
defaults write -g NSAutomaticSpellingCorrectionEnabled -bool false

# Turn on key repeat
defaults write -g ApplePressAndHoldEnabled -bool false

# Let Screen Capture save in JPG format instead of PNG
defaults write com.apple.screencapture type -string JPEG

# Disable shadow effect generated by Screen Capture
defaults write com.apple.screencapture disable-shadow -bool true

# Set the size of the dock to 35
defaults write com.apple.dock tilesize -int 35

# Disable downloaded file 'quarantining' (that annoying "this app was downloaded from the internet" dialog)
defaults write com.apple.LaunchServices LSQuarantine -bool false

# Switch the Dock to simple mode; only show the apps that are active (disabled for now, it hides docs/downloads as well -.-)
# defaults write com.apple.dock static-only -bool true

# Always see expanded save dialogs
defaults write -g NSNavPanelExpandedStateForSaveMode -bool true
defaults write -g PMPrintingExpandedStateForPrint -bool true

# Disable writing of .DS_Store files on network volumes
defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool true

# Disable Mission Control all-together (Commented out until Lion, see how it functions there)
#defaults write com.apple.dock mcx-expose-disabled -bool true

# User Airdrop over every interface
defaults write com.apple.networkbrowser BrowseAllInterfaces -bool true

# Use Finder's list view as the default view mode
defaults write com.apple.finder FXPreferredViewStyle Nlsv

# Disable the warning when changing a file extension
defaults write com.apple.finder FXEnableExtensionChangeWarning -bool false

# Enable full keyboard access for all controls (e.g. enable Tab in modal dialogs)
defaults write -g AppleKeyboardUIMode -int 3

# Make Dock icons of hidden applications translucent
defaults write com.apple.dock showhidden -bool true

# Show remaining battery time; hide percentage
defaults write com.apple.menuextra.battery ShowPercent -string "NO"
defaults write com.apple.menuextra.battery ShowTime -string "YES"

# Show all filename extensions in Finder
defaults write -g AppleShowAllExtensions -bool true

# Require password immediately after sleep or screen saver begins
defaults write com.apple.screensaver askForPassword -int 1
defaults write com.apple.screensaver askForPasswordDelay -int 0

# Enable tap to click (Trackpad)
defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad Clicking -bool true

# Enable Safari’s debug menu
defaults write com.apple.Safari IncludeInternalDebugMenu -bool true

# Remove useless icons from Safari’s bookmarks bar
defaults write com.apple.Safari ProxiesInBookmarksBar "()"

# Only use UTF-8 in Terminal.app
defaults write com.apple.terminal StringEncodings -array 4

# Disable the Ping sidebar in iTunes
defaults write com.apple.iTunes disablePingSidebar -bool true

# Disable Resume system-wide
defaults write -g NSQuitAlwaysKeepsWindows -bool false

# Lock the Dock in size and position
defaults write com.apple.Dock size-immutable -bool yes
defaults write com.apple.Dock position-immutable -bool yes

# Disable Time Machine
sudo tmutil disable

# Kill affected applications
for app in Safari Finder Dock Mail SystemUIServer; do killall "$app" >/dev/null 2>&1; done
