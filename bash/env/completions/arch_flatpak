# Completion for `utility arch flatpak`

_arch_flatpak_completions() {
  local cur="${COMP_WORDS[COMP_CWORD]}"
  local prev="${COMP_WORDS[COMP_CWORD-1]}"

  case "$prev" in
    flatpak)
      COMPREPLY=($(compgen -W "--install-from-file --update" -- "$cur"))
      ;;
    --install-from-file)
      # Complete file paths without adding space after directories
      compopt -o nospace
      COMPREPLY=($(compgen -f -- "$cur"))
      ;;
    *)
      COMPREPLY=()
      ;;
  esac
}

_arch_flatpak_completions
unset -f _arch_flatpak_completions
